(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{8283:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/usages/logs",function(){return n(9229)}])},3657:function(e,t,n){"use strict";n.d(t,{M:function(){return p}});var l=n(2670),a=n(5893),s=n(4184),r=n.n(s),i=n(3067),o=n.n(i),u=n(1163),c=(n(7294),n(9713)),d=n(1211);function p(e){var t=e.date,n=e.className,s=void 0===n?"":n,i=e.containerClassName,p=void 0===i?"":i,x=e.full,h=void 0!==x&&x,m=e.precision,g=void 0!==m&&m,f=e.locale,v=void 0===f?"":f,N=e.options,j=void 0===N?void 0:N,b=(0,u.useRouter)(),y="en"==(null!==v&&void 0!==v?v:b.query.date);if(!t)return(0,a.jsx)(a.Fragment,{children:"-"});t=(0,l.Z)(t,Date)?t:new Date(t);var w=new Intl.DateTimeFormat(y?"en-US":"fa-IR-u-nu-latn",null!==j&&void 0!==j?j:{timeStyle:"medium",dateStyle:"full"}),_=g?(0,c.Bh)(t).text:o()(t).locale("fa").fromNow(),k=w.format(t);return h?(0,a.jsx)(d.G,{className:p,popup:(0,a.jsx)("span",{dir:"rtl",children:_}),children:(0,a.jsx)("span",{className:r()("block text-gray-900 text-rtl",s),children:k})}):(0,a.jsx)(d.G,{popup:k,className:p,children:(0,a.jsx)("span",{className:r()("block text-gray-500 text-rtl",s),children:_})})}},1211:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var l=n(5893),a=n(4184),s=n.n(a),r=n(7294);function i(e){var t=e.children,n=e.popup,a=e.className,i=void 0===a?"":a,o=(0,r.useState)(!1),u=o[0],c=o[1];return n?(0,l.jsxs)("div",{className:s()("inline relative cursor-help",i),onMouseOver:function(){return c(!0)},onMouseOut:function(){return c(!1)},children:[t,u?(0,l.jsx)("div",{className:"shadow-lg z-10 absolute top-full rounded-lg bg-white px-2 py-2 ring-1 ring-slate-400",children:n}):null]}):t}},9229:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var l=n(6042),a=n(9396),s=n(5893),r=n(9008),i=n.n(r),o=n(1163),u=n(7294),c=n(8100),d=n(1272),p=n(1257),x=n(3657),h=n(6550),m=n(4685),g=n(5384),f=n(9713);function v(){var e=this,t=(0,u.useContext)(d.I),n=(0,o.useRouter)().query,r=(n.all,n.user),v=n.from,N=n.to,j=n.tag,b=(0,u.useState)({search:"",page:1,limit:50}),y=b[0],w=b[1],_=(0,u.useState)(""),k=_[0],C=_[1],S=(0,u.useMemo)((function(){return f.Pu.bind(e,t.server)}),[t.server]),T=(0,u.useCallback)((function(){C(y.search)}),[y]),D=(0,c.ZP)(r?"/daily_usage_logs"+(0,f.uM)({email:r,page:y.page,q:k,from:v,to:N,tag:j,key:btoa(t.server.url),limit:y.limit}):null,S),M=D.data,P=(D.mutate,D.isValidating);return(0,s.jsxs)(p.W,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Usages"})}),(0,s.jsxs)(h.H_,{title:"Daily Usages Logs",data:y,dataSetter:w,horizontal:!0,children:[(0,s.jsx)(h.gN,{label:"User",className:"border-x-[1px] px-3 mr-2",children:(0,s.jsx)("span",{className:"text-gray-800 py-1 px-2 rounded-lg bg-yellow-100",children:r})}),(0,s.jsx)(h.gN,{label:"Tag",className:"border-r-[1px] px-3 mr-2",children:(0,s.jsx)("span",{className:"text-gray-800 py-1 px-2 rounded-lg bg-yellow-100",children:j})}),(0,s.jsxs)(h.gN,{label:"Page",className:"border-r-[1px] px-3 mr-2",children:[(0,s.jsx)("span",{className:"text-gray-800 py-1 px-2 rounded-lg bg-yellow-100",children:y.page}),(0,s.jsx)("button",{disabled:y.page<=1,className:g.W.button,onClick:function(){return w((0,a.Z)((0,l.Z)({},y),{page:y.page-1}))},children:"Prev"}),(0,s.jsx)("button",{className:g.W.button,onClick:function(){return w((0,a.Z)((0,l.Z)({},y),{page:y.page+1}))},children:"Next"})]}),(0,s.jsx)(h.gN,{htmlFor:"limit",label:"Limit",children:(0,s.jsxs)("select",{id:"limit",className:g.W.input,children:[(0,s.jsx)("option",{value:"10",children:"10"}),(0,s.jsx)("option",{value:"50",children:"50"}),(0,s.jsx)("option",{value:"100",children:"100"})]})}),(0,s.jsx)(h.gN,{htmlFor:"search",label:"Search",children:(0,s.jsx)("input",{className:g.W.input,type:"text",id:"search",placeholder:"Destination Search ..."})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:g.W.button,onClick:T,children:"Filter"})})]}),(0,s.jsx)(m.i,{rows:null!==M&&void 0!==M?M:[],columns:["Offset","Client","Time","Tag","Destination"],index:function(e,t){return t+1+(y.page-1)*y.limit},cells:function(e){return[e.offset,e.clientAddress,(0,s.jsx)(x.M,{date:e.dateTime,full:!0,locale:"en"}),e.route,e.destination]},loading:P})]})}}},function(e){e.O(0,[885,966,58,923,774,888,179],(function(){return t=8283,e(e.s=t);var t}));var t=e.O();_N_E=t}]);