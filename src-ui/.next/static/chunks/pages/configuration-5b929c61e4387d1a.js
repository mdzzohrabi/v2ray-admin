(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{8629:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuration",function(){return l(8668)}])},1016:function(e,t,l){"use strict";l.d(t,{C:function(){return a}});var n=l(6042),s=l(5893),i=l(4184),r=l.n(i),o=l(7294);function a(e){var t=e.value,l=e.children,i=e.onEdit,a=e.className,d=void 0===a?"":a,c=e.editable,u=void 0===c||c,x=e.input,h=e.postfix,p=this,m=(0,o.useState)(!1),j=m[0],v=m[1],f=(0,o.useState)(t),b=f[0],N=f[1];(0,o.useEffect)((function(){N(t)}),[t]);var g=(0,o.useCallback)((function(e){null===e||void 0===e||e.preventDefault(),null===i||void 0===i||i.call(p,b),v(!1)}),[b]);return u?j?(0,s.jsxs)("form",{onSubmit:g,children:[(0,s.jsx)("input",(0,n.Z)({type:"text",value:b,onChange:function(e){return N(e.currentTarget.value)},className:"ring-1 ring-slate-600 rounded-lg px-1"},x)),h,(0,s.jsx)("button",{className:"text-sm ml-1 bg-slate-200 rounded-lg px-2 hover:bg-slate-800 hover:text-white",type:"submit",children:"OK"}),(0,s.jsx)("button",{onClick:function(){return v(!1)},className:"text-sm ml-1 bg-slate-200 rounded-lg px-2 hover:bg-slate-800 hover:text-white",type:"button",children:"Cancel"})]}):(0,s.jsx)("span",{className:r()("text-blue-500 ml-2 cursor-pointer px-1 rounded-lg hover:ring-slate-400 hover:ring-1 block",d),onClick:function(){return v(!j)},children:l}):(0,s.jsx)("span",{className:r()("ml-2 px-1",d),children:l})}},5835:function(e,t,l){"use strict";l.d(t,{B:function(){return o},k:function(){return r}});var n=l(5893),s=l(4184),i=l.n(s);function r(e){var t=e.label,l=e.children,s=e.className,r=void 0===s?"":s;return(0,n.jsxs)("div",{className:i()("flex flex-row border-b-[1px] border-b-gray-200 last:border-b-0",r),children:[(0,n.jsx)("span",{className:"flex-1 text-gray-400 mr-2",children:t}),l]})}function o(e){var t=e.children,l=e.className,s=void 0===l?"":l;return(0,n.jsx)("div",{className:i()("flex flex-col",s),children:t})}},1757:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var n=l(5893),s=l(4184),i=l.n(s),r=l(7294),o=l(2687),a=l(5384);function d(e){var t=e.visible,l=void 0!==t&&t,s=e.text,d=void 0===s?"Actions":s,c=e.children,u=void 0===c?[]:c,x=this,h=(0,r.useState)(l),p=h[0],m=h[1],j=(0,r.useRef)();return(0,o.pN)(j,(function(){m(!1)})),(0,r.useEffect)((function(){"boolean"==typeof l&&m(l)}),[l,m]),(0,n.jsxs)("div",{className:"relative inline-block",children:[(0,n.jsx)("span",{onClick:function(){return m(!p)},className:i()(a.W.link,{"bg-slate-200":p}),children:d}),p?(0,n.jsx)("div",{ref:j,className:"min-w-[10rem] absolute z-50 right-0 top-full bg-white shadow-lg ring-1 ring-black ring-opacity-10 px-2 py-2 rounded-lg",children:(Array.isArray(u)?u:[u]).map((function(e,t){return e?(0,n.jsx)("div",{className:"py-1 px-2 border-b-[1px] border-b-gray-200 last:border-b-0 hover:bg-cyan-100 cursor-pointer",onClick:function(){var t;null===(t=e.props.action)||void 0===t||t.call(x,m)},children:e.props.children},t):null}))}):null]})}d.Item=function(e){return e.children,e.action,(0,n.jsx)("div",{})}},8668:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return T}});var n=l(7568),s=l(6042),i=l(9396),r=l(655),o=l(5893),a=l(4184),d=l.n(a),c=l(9008),u=l.n(c),x=l(1163),h=l(7294),p=l(6501),m=l(8100),j=l(1272),v=l(1257),f=l(7548),b=l(5384),N=l(6550),g=l(1757),y=l(4685);function k(e){var t,l,n,r,a,c,u,x,p=e.inbound,m=e.dissmis,j=e.onEdit,v=(0,h.useState)((0,s.Z)({},p)),g=v[0],k=v[1],S=(0,h.useCallback)((function(e){null===e||void 0===e||e.preventDefault(),j(p,g),m()}),[j,g,m,p]);return(0,o.jsxs)(f.Vq,{onClose:m,onSubmit:S,title:"Inbound",children:[(0,o.jsxs)(N.H_,{data:g,dataSetter:k,children:[(0,o.jsxs)("div",{className:"flex flex-row",children:[(0,o.jsx)(N.gN,{htmlFor:"tag",label:"Tag",children:(0,o.jsx)("input",{type:"text",id:"tag",className:b.W.input})}),(0,o.jsx)(N.gN,{label:"Protocol",className:"flex-1",htmlFor:"protocol",children:(0,o.jsxs)("select",{id:"protocol",className:b.W.input,children:[(0,o.jsx)("option",{children:"-"}),(0,o.jsx)("option",{value:"http",children:"HTTP"}),(0,o.jsx)("option",{value:"vmess",children:"VMess"}),(0,o.jsx)("option",{value:"vless",children:"VLess"}),(0,o.jsx)("option",{value:"blackhole",children:"Blackhole"}),(0,o.jsx)("option",{value:"dns",children:"DNS"}),(0,o.jsx)("option",{value:"freedom",children:"Freedom"}),(0,o.jsx)("option",{value:"mtproto",children:"MTProto"}),(0,o.jsx)("option",{value:"socks",children:"SOCKS"}),(0,o.jsx)("option",{value:"shadowsocks",children:"Shadowsocks"}),(0,o.jsx)("option",{value:"dokodemo-door",children:"Dokodemo-door"})]})})]}),"http"==(null===g||void 0===g?void 0:g.protocol)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"flex flex-row pt-2",children:(0,o.jsxs)(N.H_,{data:null!==(r=g.settings)&&void 0!==r?r:{},dataSetter:function(e){return k((0,i.Z)((0,s.Z)({},g),{settings:e}))},children:[(0,o.jsx)(N.gN,{label:"User Level",htmlFor:"userLevel",className:"flex-1",children:(0,o.jsx)("input",{type:"number",id:"userLevel",className:b.W.input,placeholder:"0"})}),(0,o.jsx)(N.gN,{label:"Timeout",htmlFor:"timeout",className:"flex-1",children:(0,o.jsx)("input",{type:"number",id:"timeout",className:b.W.input,placeholder:"0"})}),(0,o.jsx)(N.gN,{label:"Allow Transparent",htmlFor:"allowTransparent",className:"flex-1",children:(0,o.jsx)("input",{type:"checkbox",id:"allowTransparent",className:b.W.input})})]})}),(0,o.jsx)(N.FE,{data:null!==(a=null===g||void 0===g||null===(t=g.settings)||void 0===t?void 0:t.accounts)&&void 0!==a?a:[],dataSetter:function(e){return k((0,i.Z)((0,s.Z)({},g),{settings:(0,i.Z)((0,s.Z)({},g.settings),{accounts:e})}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2 py-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Accounts"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,{})},className:b.W.addButtonSmall,children:"+ Add Account"})})]}),(0,o.jsx)(y.i,{rows:null!==(c=e.items)&&void 0!==c?c:[],columns:["Username","Password","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"user",children:(0,o.jsx)("input",{type:"text",id:"user",className:b.W.input})}),(0,o.jsx)(N.gN,{htmlFor:"pass",children:(0,o.jsx)("input",{type:"text",id:"pass",className:b.W.input})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})]}):null,"mtproto"==(null===g||void 0===g?void 0:g.protocol)?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(N.FE,{data:null!==(u=null===g||void 0===g||null===(l=g.settings)||void 0===l?void 0:l.users)&&void 0!==u?u:[],dataSetter:function(e){return k((0,i.Z)((0,s.Z)({},g),{settings:(0,i.Z)((0,s.Z)({},g.settings),{users:e})}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2 py-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Users"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,{})},className:b.W.addButtonSmall,children:"+ Add User"})})]}),(0,o.jsx)(y.i,{rows:null!==(x=e.items)&&void 0!==x?x:[],columns:["Email","Level","Secret","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"email",children:(0,o.jsx)("input",{type:"text",id:"email",className:b.W.input})}),(0,o.jsx)(N.gN,{htmlFor:"level",children:(0,o.jsx)("input",{type:"number",id:"level",className:b.W.input})}),(0,o.jsx)(N.gN,{htmlFor:"secret",children:(0,o.jsx)("input",{type:"text",id:"secret",className:b.W.input})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})}):null,"dokodemo-door"==(null===g||void 0===g?void 0:g.protocol)?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(N.EV,{path:"settings",children:(0,o.jsx)(N.gN,{label:"Address",htmlFor:"address",children:(0,o.jsx)("input",{type:"text",id:"address",className:b.W.input})})})}):null,(0,o.jsxs)("div",{className:"flex flex-row pt-2",children:[(0,o.jsx)(N.gN,{label:"Listen",htmlFor:"listen",className:"flex-1",children:(0,o.jsx)("input",{type:"text",id:"listen",className:b.W.input,placeholder:"0.0.0.0"})}),(0,o.jsx)(N.gN,{label:"Port",htmlFor:"port",children:(0,o.jsx)("input",{type:"number",id:"port",className:b.W.input})})]}),(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsxs)(N.EV,{path:"streamSettings",children:[(0,o.jsx)("h3",{className:"border-b-2 border-b-gray-200 px-2 pb-2 pt-2 font-smibold",children:"Stream settings"}),(0,o.jsxs)("div",{className:"flex flex-row",children:[(0,o.jsx)(N.gN,{label:"Network",htmlFor:"network",className:"flex-1",children:(0,o.jsxs)("select",{className:b.W.input,id:"network",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"tcp",children:"TCP"}),(0,o.jsx)("option",{value:"kcp",children:"KCP"}),(0,o.jsx)("option",{value:"http",children:"HTTP"}),(0,o.jsx)("option",{value:"domainsocket",children:"DomainSocket"}),(0,o.jsx)("option",{value:"quic",children:"Quic"}),(0,o.jsx)("option",{value:"ws",children:"WebSocket"})]})}),(0,o.jsx)(N.gN,{label:"Security",htmlFor:"security",children:(0,o.jsxs)("select",{className:b.W.input,id:"security",children:[(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"tls",children:"TLS"})]})})]}),"tcp"==(null===g||void 0===g||null===(n=g.streamSettings)||void 0===n?void 0:n.network)?(0,o.jsx)("div",{className:"flex flex-row",children:(0,o.jsx)(N.EV,{path:"tcpSettings",children:(0,o.jsxs)(N.EV,{path:"header",children:[(0,o.jsx)(N.gN,{label:"Header Type",htmlFor:"type",children:(0,o.jsxs)("select",{className:b.W.input,id:"type",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"http",children:"HTTP"})]})}),(0,o.jsxs)(N.EV,{path:"request",children:[(0,o.jsx)(N.gN,{label:"Request Method",htmlFor:"method",children:(0,o.jsx)("input",{type:"text",id:"method",className:b.W.input})}),(0,o.jsx)(N.gN,{label:"Request Path",htmlFor:"path",children:(0,o.jsx)("input",{type:"text",id:"method",className:b.W.input})})]})]})})}):null]})})]}),(0,o.jsx)("div",{className:"pt-3 border-t-[1px] mt-3 flex justify-end",children:(0,o.jsx)("button",{onClick:S,className:b.W.button,children:"Edit Inbound"})})]})}function S(e){var t,l,n,r,a,c,u,x,p,m,j,v,k,S,w,W,F,Z=e.outbound,I=e.dissmis,C=e.onEdit,P=(0,h.useState)((0,s.Z)({protocol:"http"},Z)),T=P[0],E=P[1],D=(0,h.useCallback)((function(e){null===e||void 0===e||e.preventDefault(),C(Z,T),I()}),[C,T,I]);return(0,o.jsxs)(f.Vq,{onClose:I,onSubmit:D,title:"Outbound",children:[(0,o.jsxs)(N.H_,{data:T,dataSetter:E,children:[(0,o.jsxs)("div",{className:"flex flex-row",children:[(0,o.jsx)(N.gN,{htmlFor:"tag",label:"Tag",children:(0,o.jsx)("input",{type:"text",id:"tag",className:b.W.input})}),(0,o.jsx)(N.gN,{label:"Protocol",className:"flex-1",htmlFor:"protocol",children:(0,o.jsxs)("select",{id:"protocol",className:b.W.input,children:[(0,o.jsx)("option",{children:"-"}),(0,o.jsx)("option",{value:"http",children:"HTTP"}),(0,o.jsx)("option",{value:"vmess",children:"VMess"}),(0,o.jsx)("option",{value:"vless",children:"VLess"}),(0,o.jsx)("option",{value:"blackhole",children:"Blackhole"}),(0,o.jsx)("option",{value:"dns",children:"DNS"}),(0,o.jsx)("option",{value:"freedom",children:"Freedom"}),(0,o.jsx)("option",{value:"mtproto",children:"MTProto"}),(0,o.jsx)("option",{value:"socks",children:"SOCKS"}),(0,o.jsx)("option",{value:"shadowsocks",children:"Shadowsocks"})]})})]}),(0,o.jsx)("div",{className:"flex flex-row pt-2",children:(0,o.jsx)(N.gN,{label:"Send Through",htmlFor:"sendThrough",className:"flex-1",children:(0,o.jsx)("input",{type:"text",id:"sendThrough",className:b.W.input,placeholder:"127.0.0.1"})})}),"freedom"==(null===T||void 0===T?void 0:T.protocol)?(0,o.jsx)("div",{className:"flex flex-row pt-2",children:(0,o.jsxs)(N.H_,{data:null!==(u=T.settings)&&void 0!==u?u:{},dataSetter:function(e){return E((0,i.Z)((0,s.Z)({},T),{settings:e}))},children:[(0,o.jsx)(N.gN,{label:"User Level",htmlFor:"userLevel",className:"flex-1",children:(0,o.jsx)("input",{type:"number",id:"userLevel",className:b.W.input,placeholder:"0"})}),(0,o.jsx)(N.gN,{label:"Redirect",htmlFor:"redirect",className:"flex-1",children:(0,o.jsx)("input",{type:"text",id:"redirect",className:b.W.input,placeholder:"127.0.0.1:80"})}),(0,o.jsx)(N.gN,{label:"Domain Strategy",htmlFor:"domainStrategy",children:(0,o.jsxs)("select",{className:b.W.input,id:"domainStrategy",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"AsIs",children:"AsIs"}),(0,o.jsx)("option",{value:"IPIfNonMatch",children:"IPIfNonMatch"}),(0,o.jsx)("option",{value:"IPOnDemand",children:"IPOnDemand"})]})})]})}):null,"blackhole"==(null===T||void 0===T?void 0:T.protocol)?(0,o.jsx)("div",{className:"flex flex-row pt-2",children:(0,o.jsx)(N.H_,{data:null!==(x=null===(t=T.settings)||void 0===t?void 0:t.response)&&void 0!==x?x:{},dataSetter:function(e){return E((0,i.Z)((0,s.Z)({},T),{settings:(0,i.Z)((0,s.Z)({},T.settings),{response:e})}))},children:(0,o.jsx)(N.gN,{label:"Response Type",htmlFor:"type",children:(0,o.jsxs)("select",{className:b.W.input,id:"type",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"http",children:"HTTP"})]})})})}):null,"http"==(null===T||void 0===T?void 0:T.protocol)?(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h3",{className:"border-b-2 border-b-gray-200 px-2 pb-2 pt-2 font-smibold",children:"Settings (HTTP)"}),(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)(N.FE,{data:null!==(p=null===T||void 0===T||null===(l=T.settings)||void 0===l?void 0:l.servers)&&void 0!==p?p:[],dataSetter:function(e){return E((0,i.Z)((0,s.Z)({},T),{settings:(0,i.Z)((0,s.Z)({},T.settings),{servers:e})}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2 py-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Servers"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,{})},className:b.W.addButtonSmall,children:"+ Add Server"})})]}),(0,o.jsx)(y.i,{rows:null!==(m=e.items)&&void 0!==m?m:[],columns:["Address","Port","Users","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"address",children:(0,o.jsx)("input",{type:"text",id:"address",className:b.W.input,placeholder:"0.0.0.0"})}),(0,o.jsx)(N.gN,{htmlFor:"port",children:(0,o.jsx)("input",{type:"number",id:"port",className:b.W.input,placeholder:"80"})}),(0,o.jsx)(N.FE,{data:null!==(j=t.users)&&void 0!==j?j:[],dataSetter:function(l){return e.updateItem(t,(0,i.Z)((0,s.Z)({},t),{users:l}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[e.items.map((function(t){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:(0,o.jsxs)("div",{className:"flex flex-row border-b-[1px] pb-2 last-of-type:border-b-0 text-xs items-center",children:[(0,o.jsx)(N.gN,{htmlFor:"username",label:"Username",children:(0,o.jsx)("input",{type:"text",className:b.W.input,id:"username"})}),(0,o.jsx)(N.gN,{htmlFor:"password",label:"Password",children:(0,o.jsx)("input",{type:"text",className:b.W.input,id:"password"})}),(0,o.jsx)("span",{onClick:function(){return e.deleteItem(t)},className:b.W.link,children:"Delete"})]})})})),(0,o.jsx)("span",{onClick:function(){return e.addItem(null,{})},className:b.W.link,children:"+ Add User"})]})}}),(0,o.jsx)(g.Z,{children:(0,o.jsx)(g.Z.Item,{action:function(){return e.deleteItem(t)},children:"Delete"})})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})})]}):null,"vmess"==(null===T||void 0===T?void 0:T.protocol)?(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h3",{className:"border-b-2 border-b-gray-200 px-2 pb-2 pt-2 font-smibold",children:"Settings (VMESS)"}),(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)(N.FE,{data:null!==(v=null===T||void 0===T||null===(n=T.settings)||void 0===n?void 0:n.vnext)&&void 0!==v?v:[],dataSetter:function(e){return E((0,i.Z)((0,s.Z)({},T),{settings:(0,i.Z)((0,s.Z)({},T.settings),{vnext:e})}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2 py-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"VNext"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,{})},className:b.W.addButtonSmall,children:"+ Add VNext Server"})})]}),(0,o.jsx)(y.i,{rows:null!==(k=e.items)&&void 0!==k?k:[],columns:["Address","Port","Users","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"address",children:(0,o.jsx)("input",{type:"text",id:"address",className:b.W.input,placeholder:"0.0.0.0"})}),(0,o.jsx)(N.gN,{htmlFor:"port",children:(0,o.jsx)("input",{type:"number",id:"port",className:b.W.input,placeholder:"80"})}),(0,o.jsx)(N.FE,{data:null!==(S=t.users)&&void 0!==S?S:[],dataSetter:function(l){return e.updateItem(t,(0,i.Z)((0,s.Z)({},t),{users:l}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[e.items.map((function(t){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:(0,o.jsxs)("div",{className:"flex flex-col border-b-[1px] pb-2 last-of-type:border-b-0 text-xs ",children:[(0,o.jsx)(N.gN,{htmlFor:"id",label:"ID",children:(0,o.jsx)("input",{type:"text",className:b.W.input,id:"id"})}),(0,o.jsx)(N.gN,{htmlFor:"alterId",label:"Alter ID",children:(0,o.jsx)("input",{type:"number",className:b.W.input,id:"alterId",placeholder:"0"})}),(0,o.jsx)(N.gN,{htmlFor:"level",label:"Level",children:(0,o.jsx)("input",{type:"number",className:b.W.input,id:"level",placeholder:"0"})}),(0,o.jsx)(N.gN,{htmlFor:"security",label:"Security",children:(0,o.jsxs)("select",{className:b.W.input,id:"security",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"auto",children:"auto"}),(0,o.jsx)("option",{value:"aes-128-gcm",children:"aes-128-gcm"}),(0,o.jsx)("option",{value:"chacha20-poly1305",children:"chacha20-poly1305"}),(0,o.jsx)("option",{value:"none",children:"none"})]})}),(0,o.jsx)("span",{onClick:function(){return e.deleteItem(t)},className:b.W.link,children:"Delete"})]})})})),(0,o.jsx)("span",{onClick:function(){return e.addItem(null,{})},className:b.W.link,children:"+ Add User"})]})}}),(0,o.jsx)(g.Z,{children:(0,o.jsx)(g.Z.Item,{action:function(){return e.deleteItem(t)},children:"Delete"})})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})})]}):null,"mtproto"==(null===T||void 0===T?void 0:T.protocol)?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(N.FE,{data:null!==(w=null===T||void 0===T||null===(r=T.settings)||void 0===r?void 0:r.users)&&void 0!==w?w:[],dataSetter:function(e){return E((0,i.Z)((0,s.Z)({},T),{settings:(0,i.Z)((0,s.Z)({},T.settings),{users:e})}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2 py-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Users"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,{})},className:b.W.addButtonSmall,children:"+ Add User"})})]}),(0,o.jsx)(y.i,{rows:null!==(W=e.items)&&void 0!==W?W:[],columns:["Secret","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"secret",children:(0,o.jsx)("input",{type:"text",id:"secret",className:b.W.input})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})}):null,(0,o.jsx)(N.EV,{path:"streamSettings",children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsxs)("h3",{className:"border-b-2 border-b-gray-200 px-2 pb-2 pt-2 font-smibold",children:["Stream settings",(null===T||void 0===T||null===(a=T.proxySettings)||void 0===a?void 0:a.tag)?(0,o.jsx)("span",{className:"italic text-gray-500 ml-2 text-xs px-2 py-1 rounded-lg bg-yellow-100",children:"Ignored because of Proxy"}):null]}),(0,o.jsxs)("div",{className:"flex flex-row",children:[(0,o.jsx)(N.gN,{label:"Network",htmlFor:"network",className:"flex-1",children:(0,o.jsxs)("select",{className:b.W.input,id:"network",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"tcp",children:"TCP"}),(0,o.jsx)("option",{value:"kcp",children:"KCP"}),(0,o.jsx)("option",{value:"http",children:"HTTP"}),(0,o.jsx)("option",{value:"domainsocket",children:"DomainSocket"}),(0,o.jsx)("option",{value:"quic",children:"Quic"}),(0,o.jsx)("option",{value:"ws",children:"WebSocket"})]})}),(0,o.jsx)(N.gN,{label:"Security",htmlFor:"security",children:(0,o.jsxs)("select",{className:b.W.input,id:"security",children:[(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"tls",children:"TLS"})]})})]}),"tcp"==(null===T||void 0===T||null===(c=T.streamSettings)||void 0===c?void 0:c.network)?(0,o.jsx)("div",{className:"flex flex-row",children:(0,o.jsx)(N.EV,{path:"tcpSettings",children:(0,o.jsxs)(N.EV,{path:"header",children:[(0,o.jsx)(N.gN,{label:"Header Type",htmlFor:"type",children:(0,o.jsxs)("select",{className:b.W.input,id:"type",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"http",children:"HTTP"})]})}),(0,o.jsxs)(N.EV,{path:"request",children:[(0,o.jsx)(N.gN,{label:"Request Method",htmlFor:"method",children:(0,o.jsx)("input",{type:"text",id:"method",className:b.W.input})}),(0,o.jsx)(N.gN,{label:"Request Path",htmlFor:"path",children:(0,o.jsx)("input",{type:"text",id:"method",className:b.W.input})})]})]})})}):null]})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h3",{className:"border-b-2 border-b-gray-200 px-2 pb-2 pt-2 font-smibold",children:"Proxy settings"}),(0,o.jsx)("div",{className:"flex flex-row",children:(0,o.jsx)(N.gN,{label:"Proxy Tag",htmlFor:"tag",className:"flex-1",data:null!==(F=null===T||void 0===T?void 0:T.proxySettings)&&void 0!==F?F:{},dataSetter:function(e){return E((0,i.Z)((0,s.Z)({},T),{proxySettings:e}))},children:(0,o.jsx)("input",{className:b.W.input,type:"text",id:"tag",placeholder:"Proxy Tag"})})})]})]}),(0,o.jsx)("div",{className:"pt-3 border-t-[1px] mt-3 flex justify-end",children:(0,o.jsx)("button",{onClick:D,className:b.W.button,children:"Edit Outbound"})})]})}var w=l(9713);function W(e){var t,l,n=e.balancer,r=e.dissmis,a=e.onEdit,c=(0,h.useState)((0,w.p$)(n)),u=c[0],x=c[1],p=(0,h.useCallback)((function(e){null===e||void 0===e||e.preventDefault(),a(n,u),r()}),[a,u,r]);return(0,o.jsxs)(f.Vq,{onClose:r,onSubmit:p,title:"Routing Balancer",children:[(0,o.jsxs)(N.H_,{data:u,dataSetter:x,children:[(0,o.jsx)("div",{className:"flex flex-row",children:(0,o.jsx)(N.gN,{htmlFor:"tag",label:"Tag",children:(0,o.jsx)("input",{type:"text",id:"tag",className:b.W.input})})}),(0,o.jsx)(N.FE,{data:null!==(t=u.selector)&&void 0!==t?t:[],dataSetter:function(e){return x((0,i.Z)((0,s.Z)({},u),{selector:e}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Selectors"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,"")},className:b.W.addButtonSmall,children:"+ Add Selector"})})]}),(0,o.jsx)(y.i,{rows:null!==(l=e.items)&&void 0!==l?l:[],columns:["Tag","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"selectorTag",children:(0,o.jsx)("input",{type:"text",id:"selectorTag",className:b.W.input,placeholder:""})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})]}),(0,o.jsxs)("div",{className:"pt-3 border-t-[1px] mt-3 flex justify-end",children:[(0,o.jsx)("button",{onClick:r,className:b.W.button,children:"Cancel"}),(0,o.jsx)("button",{onClick:p,className:b.W.buttonPrimary,children:"Edit Balancer"})]})]})}function F(e){var t,l,n,r,a=e.children,c=(0,h.useState)(""),u=c[0],x=c[1];""==u&&(u=null!==(n=null===(t=a[0])||void 0===t||null===(l=t.props)||void 0===l?void 0:l.title)&&void 0!==n?n:"");return(0,o.jsxs)("div",{className:"tabs flex flex-col",children:[(0,o.jsx)("div",{className:"flex flex-row flex-nowrap mb-2 rounded-3xl bg-slate-100 w-fit",children:a.map((function(e,t){var l,n;return(0,o.jsx)("div",{className:d()("px-3 py-1 whitespace-nowrap cursor-pointer rounded-3xl",{"bg-slate-600 text-white":(null===e||void 0===e||null===(l=e.props)||void 0===l?void 0:l.title)==u}),onClick:function(){var t;return x(null!==(r=null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.title)&&void 0!==r?r:"")},children:null===e||void 0===e||null===(n=e.props)||void 0===n?void 0:n.title},t)}))}),(0,o.jsx)("div",{children:a.map((function(e,t){return(0,o.jsx)(h.Fragment,{children:(0,h.createElement)(e.type,(0,i.Z)((0,s.Z)({},e.props),{isSelected:e.props.title==u}))},t)}))})]})}function Z(e){var t,l,n,r,a,c,u,x,p=e.rule,m=e.dissmis,j=e.onEdit,v=(0,h.useState)((0,s.Z)({type:"field"},p)),g=v[0],k=v[1],S=(0,h.useCallback)((function(e){null===e||void 0===e||e.preventDefault(),j(p,g),m()}),[j,g,m]);return(0,o.jsxs)(f.Vq,{onClose:m,onSubmit:S,title:"Routing Rule",children:[(0,o.jsx)(N.H_,{data:g,dataSetter:k,children:(0,o.jsxs)(F,{children:[(0,o.jsxs)(F.Tab,{title:"Rule",children:[(0,o.jsx)("div",{className:"flex-row flex-1",children:(0,o.jsx)(N.gN,{htmlFor:"description",label:"Description",children:(0,o.jsx)("input",{type:"text",id:"description",className:d()(b.W.input,"flex-1")})})}),(0,o.jsxs)("div",{className:"flex flex-row",children:[(0,o.jsx)(N.gN,{htmlFor:"tag",label:"Tag",children:(0,o.jsx)("input",{type:"text",id:"tag",className:b.W.input})}),(0,o.jsx)(N.gN,{htmlFor:"type",label:"Type",children:(0,o.jsx)("input",{type:"text",readOnly:!0,id:"tag",className:b.W.input})}),(0,o.jsx)(N.gN,{label:"Domain Matcher",htmlFor:"domainMatcher",children:(0,o.jsxs)("select",{className:b.W.input,id:"domainMatcher",children:[(0,o.jsx)("option",{children:"-"}),(0,o.jsx)("option",{value:"linear",children:"Linear"}),(0,o.jsx)("option",{value:"mph",children:"MPH"})]})})]}),(0,o.jsxs)("div",{className:"flex flex-row pt-2",children:[(0,o.jsx)(N.gN,{label:"Network",className:"flex-1",htmlFor:"network",children:(0,o.jsxs)("select",{id:"network",className:b.W.input,children:[(0,o.jsx)("option",{children:"-"}),(0,o.jsx)("option",{value:"tcp",children:"TCP"}),(0,o.jsx)("option",{value:"udp",children:"UDP"}),(0,o.jsx)("option",{value:"tcp/udp",children:"TCP/UDP"})]})}),(0,o.jsx)(N.gN,{label:"Source Port",htmlFor:"sourcePort",className:"flex-1",children:(0,o.jsx)("input",{type:"text",id:"sourcePort",className:b.W.input,placeholder:"100-200"})}),(0,o.jsx)(N.gN,{label:"Port",htmlFor:"port",className:"flex-1",children:(0,o.jsx)("input",{type:"text",id:"port",className:b.W.input,placeholder:"100-200"})})]}),(0,o.jsxs)("div",{className:"flex flex-row pt-2",children:[(0,o.jsx)(N.gN,{label:"Protocol",className:"flex-1",htmlFor:"protocol",children:(0,o.jsx)("input",{type:"text",id:"protocol",placeholder:"vmess",className:b.W.input})}),(0,o.jsx)(N.gN,{label:"Attributes",htmlFor:"attrs",className:"flex-1",children:(0,o.jsx)("input",{type:"text",id:"attrs",placeholder:"attrs[':method'] == 'GET'",className:b.W.input})})]}),(0,o.jsxs)("div",{className:"flex flex-row pt-2",children:[(0,o.jsx)(N.gN,{label:"Outbound Tag",className:"flex-1",htmlFor:"outboundTag",children:(0,o.jsx)("input",{type:"text",id:"outboundTag",placeholder:"direct",className:b.W.input})}),(0,o.jsx)(N.gN,{label:"Balancer Tag",className:"flex-1",htmlFor:"balancerTag",children:(0,o.jsx)("input",{type:"text",id:"balancerTag",placeholder:"direct",className:b.W.input})})]}),(0,o.jsx)(N.FE,{data:null!==(t=g.inboundTag)&&void 0!==t?t:[],dataSetter:function(e){return k((0,i.Z)((0,s.Z)({},g),{inboundTag:e}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2 py-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Inbound Tag"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,"")},className:b.W.addButtonSmall,children:"+ Add Inbound Tag"})})]}),(0,o.jsx)(y.i,{rows:null!==(l=e.items)&&void 0!==l?l:[],columns:["Inbound Tag","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"tag",children:(0,o.jsx)("input",{type:"text",id:"tag",className:b.W.input,placeholder:""})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})]}),(0,o.jsx)(F.Tab,{title:"IPs",children:(0,o.jsx)(N.FE,{data:null!==(n=g.ip)&&void 0!==n?n:[],dataSetter:function(e){return k((0,i.Z)((0,s.Z)({},g),{ip:e}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"IPs"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,"0.0.0.0")},className:b.W.addButtonSmall,children:"+ Add IP"})})]}),(0,o.jsx)(y.i,{rows:null!==(r=e.items)&&void 0!==r?r:[],columns:["Address","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"address",children:(0,o.jsx)("input",{type:"text",id:"address",className:b.W.input,placeholder:"0.0.0.0"})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})}),(0,o.jsx)(F.Tab,{title:"Users",children:(0,o.jsx)(N.FE,{data:null!==(a=g.user)&&void 0!==a?a:[],dataSetter:function(e){return k((0,i.Z)((0,s.Z)({},g),{user:e}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Users"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,"")},className:b.W.addButtonSmall,children:"+ Add User"})})]}),(0,o.jsx)(y.i,{rows:null!==(c=e.items)&&void 0!==c?c:[],columns:["User","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"user",children:(0,o.jsx)("input",{type:"text",id:"user",className:b.W.input,placeholder:""})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})}),(0,o.jsx)(F.Tab,{title:"Domains",children:(0,o.jsx)(N.FE,{data:null!==(u=g.domain)&&void 0!==u?u:[],dataSetter:function(e){return k((0,i.Z)((0,s.Z)({},g),{domain:e}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Domains"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,"")},className:b.W.addButtonSmall,children:"+ Add Domain"})})]}),(0,o.jsx)(y.i,{rows:null!==(x=e.items)&&void 0!==x?x:[],columns:["Domain","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"domain",children:(0,o.jsx)("input",{type:"text",id:"domain",className:b.W.input,placeholder:""})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})})]})}),(0,o.jsxs)("div",{className:"pt-3 border-t-[1px] mt-3 flex justify-end",children:[(0,o.jsx)("button",{onClick:m,className:b.W.button,children:"Cancel"}),(0,o.jsx)("button",{onClick:S,className:b.W.buttonPrimary,children:"Edit Rule"})]})]})}F.Tab=function(e){var t=e.children,l=(e.title,e.isSelected),n=e.className,s=void 0===n?"":n;return(0,o.jsx)("div",{className:d()({hidden:!l},s),children:t})};var I=l(5835);function C(e){var t=e.value,l=JSON.stringify(t,null,"\t").split("\n");return(0,o.jsx)("div",{children:l.map((function(e,t){var l=e.split("\t");return(0,o.jsxs)("p",{className:"py-1",children:[l.slice(0,l.length-1).map((function(e,t){return(0,o.jsx)("span",{className:"w-4 inline-block",children:"\xa0"},t)})),e]},t)}))})}var P=l(1016);function T(){var e,t,l,a,c,T=this,E=(0,h.useContext)(j.I),D=(0,x.useRouter)(),A="1"==D.query.all,O=(0,h.useState)({showDetail:!0}),_=O[0],H=O[1],U=(0,h.useMemo)((function(){return w.Pu.bind(T,E.server)}),[E]),B=(0,m.ZP)("/config",U,{revalidateOnFocus:!1,revalidateOnMount:!0,revalidateOnReconnect:!1}),M=B.mutate,L=B.data,V=B.isValidating,R=(0,h.useState)((0,w.p$)(L)),z=R[0],q=R[1];(0,h.useEffect)((function(){return q((0,w.p$)(L))}),[L]);var K,G,$,Q,X,J,Y,ee,te,le,ne,se,ie,re,oe,ae,de,ce,ue,xe,he,pe,me,je,ve,fe,be,Ne,ge,ye,ke,Se,we,We,Fe,Ze,Ie,Ce=(0,h.useCallback)((0,n.Z)((function(){var e,t,l,n;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e=(0,w.My)(L,z),[4,(0,w.Pu)(E.server,"/config",{changes:e})];case 1:if(!(null===(t=s.sent())||void 0===t?void 0:t.ok))throw Error("Cannot save configuration");return p.ZP.success("Configuration saved successful"),M(),[3,3];case 2:return l=s.sent(),p.ZP.error(null!==(n=null===l||void 0===l?void 0:l.message)&&void 0!==n?n:"Error"),[3,3];case 3:return[2]}}))})),[E,z,L,M]),Pe=(0,h.useCallback)((0,n.Z)((function(){var e,t,l;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,w.Pu)(E.server,"/restart",{})];case 1:return e=n.sent(),p.ZP.success((null===e||void 0===e?void 0:e.result)||"Service restarted"),[3,3];case 2:return t=n.sent(),p.ZP.error(null!==(l=null===t||void 0===t?void 0:t.message)&&void 0!==l?l:"Error"),[3,3];case 3:return[2]}}))})),[E]),Te=(0,o.jsx)("span",{className:"text-gray-400 text-xs",children:"-"}),Ee=(0,f.Rh)((function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o.jsx)(k,{inbound:e,dissmis:l,onEdit:t})})),De=(0,f.Rh)((function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o.jsx)(S,{outbound:e,onEdit:t,dissmis:l})})),Ae=(0,f.Rh)((function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o.jsx)(Z,{rule:e,onEdit:t,dissmis:l})})),Oe=(0,f.Rh)((function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o.jsx)(W,{balancer:e,dissmis:l,onEdit:t})})),_e=(0,o.jsx)("div",{id:"config-inbounds",className:"rounded-lg border-2 flex flex-col flex-1",children:(0,o.jsx)(N.FE,{data:null!==(K=null===z||void 0===z?void 0:z.inbounds)&&void 0!==K?K:[],dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{inbounds:e}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(N.H_,{title:"Inbounds",data:_,dataSetter:H,horizontal:!0,children:(0,o.jsxs)("div",{className:"flex flex-row flex-1 pr-2",children:[(0,o.jsx)("div",{className:"flex-1"}),(0,o.jsx)("button",{onClick:function(){return Ee.show({},e.addItem)},className:d()(b.W.addButton,"float-right"),children:"+ Add Inbound"})]})}),(0,o.jsx)(y.i,{rows:null!==(G=null===z||void 0===z?void 0:z.inbounds)&&void 0!==G?G:[],columns:["Tag","Protocol","Listen","Port","Settings","Stream Settings","Action"],cells:function(t){var l,n,s,i;return[null!==($=t.tag)&&void 0!==$?$:Te,null!==(Q=t.protocol)&&void 0!==Q?Q:Te,null!==(X=t.listen)&&void 0!==X?X:Te,null!==(J=t.port)&&void 0!==J?J:Te,(0,o.jsx)(I.B,{children:(0,o.jsx)(I.k,{label:"Clients",children:null!==(Y=null===(l=t.settings)||void 0===l||null===(n=l.clients)||void 0===n?void 0:n.length)&&void 0!==Y?Y:Te})}),(0,o.jsxs)(I.B,{children:[(0,o.jsx)(I.k,{label:"Network",children:null!==(ee=null===(s=t.streamSettings)||void 0===s?void 0:s.network)&&void 0!==ee?ee:Te}),(0,o.jsx)(I.k,{label:"Security",children:null!==(te=null===(i=t.streamSettings)||void 0===i?void 0:i.security)&&void 0!==te?te:Te})]}),(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(g.Z.Item,{action:function(){return Ee.show(t,e.updateItem)},children:"Edit"}),(0,o.jsx)(g.Z.Item,{action:function(){return D.push("/users?protocol="+t.protocol+(A?"&all=1":""))},children:"Users"}),(0,o.jsx)(g.Z.Item,{action:function(){return e.deleteItem(t)},children:"Delete"})]})]}})]})}})}),He=(0,o.jsx)("div",{className:"rounded-lg flex flex-col flex-1 border-2",children:(0,o.jsx)(N.H_,{title:"Log",data:null!==(le=null===z||void 0===z?void 0:z.log)&&void 0!==le?le:{},dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{log:e}))},layoutVertical:!0,children:(0,o.jsxs)("div",{className:"p-2",children:[(0,o.jsx)(N.gN,{label:"Level",htmlFor:"loglevel",children:(0,o.jsxs)("select",{id:"loglevel",className:b.W.input,children:[(0,o.jsx)("option",{value:"debug",children:"Debug"}),(0,o.jsx)("option",{value:"info",children:"Info"}),(0,o.jsx)("option",{value:"warning",children:"Warning"}),(0,o.jsx)("option",{value:"error",children:"Error"}),(0,o.jsx)("option",{value:"none",children:"None"})]})}),(0,o.jsx)(N.gN,{label:"Access Log",htmlFor:"access",className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"text",className:b.W.input,placeholder:"/var/log/v2ray/access.log"})}),(0,o.jsx)(N.gN,{label:"Error Log",htmlFor:"error",className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"text",className:b.W.input,placeholder:"/var/log/v2ray/error.log"})})]})})}),Ue=(0,o.jsx)("div",{className:"rounded-lg flex flex-col flex-1 border-2",children:(0,o.jsxs)(N.H_,{title:"Api",data:null!==(ne=null===z||void 0===z?void 0:z.api)&&void 0!==ne?ne:{},dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{api:e}))},layoutVertical:!0,children:[(0,o.jsx)("div",{className:"p-2",children:(0,o.jsx)(N.gN,{label:"Tag",htmlFor:"tag",className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"text",className:b.W.input})})}),(0,o.jsx)(N.FE,{data:null!==(se=null===z||void 0===z||null===(e=z.api)||void 0===e?void 0:e.services)&&void 0!==se?se:[],dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{api:(0,i.Z)((0,s.Z)({},null===z||void 0===z?void 0:z.api),{services:e})}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1"),children:"Services"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.addItem(null,"HandlerService")},className:b.W.addButtonSmall,children:"+ Add Service"})})]}),(0,o.jsx)(y.i,{rows:null!==(ie=e.items)&&void 0!==ie?ie:[],columns:["Service","Action"],cells:function(t){return[(0,o.jsx)(N.gN,{htmlFor:"service",children:(0,o.jsx)("input",{type:"text",id:"service",className:b.W.input,placeholder:""})}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteItem(t)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:t,dataSetter:function(l){return e.updateItem(t,l)},children:l})}})]})}})]})}),Be=(0,o.jsxs)("div",{className:"rounded-lg flex flex-col flex-1 border-2",children:[(0,o.jsx)(N.H_,{title:"System",data:null!==(re=null===z||void 0===z||null===(t=z.policy)||void 0===t?void 0:t.system)&&void 0!==re?re:{},dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{policy:(0,i.Z)((0,s.Z)({},null===z||void 0===z?void 0:z.policy),{system:e})}))},children:(0,o.jsxs)("div",{className:"p-2 flex-row flex",children:[(0,o.jsx)(N.gN,{horizontal:!0,label:"Stats Inbound Uplink",htmlFor:"statsInboundUplink",className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"checkbox",id:"statsInboundUplink",className:b.W.input})}),(0,o.jsx)(N.gN,{horizontal:!0,label:"Stats Inbound Downlink",htmlFor:"statsInboundDownlink",className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"checkbox",id:"statsInboundDownlink",className:b.W.input})}),(0,o.jsx)(N.gN,{horizontal:!0,label:"Stats Outbound Uplink",htmlFor:"statsOutboundUplink",className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"checkbox",id:"statsOutboundUplink",className:b.W.input})}),(0,o.jsx)(N.gN,{horizontal:!0,label:"Stats Outbound Downlink",htmlFor:"statsOutboundDownlink",className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"checkbox",id:"statsOutboundDownlink",className:b.W.input})})]})}),(0,o.jsx)(N.GG,{data:null!==(oe=null===z||void 0===z||null===(l=z.policy)||void 0===l?void 0:l.levels)&&void 0!==oe?oe:{},dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{policy:(0,i.Z)((0,s.Z)({},null===z||void 0===z?void 0:z.policy),{levels:e})}))},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-row items-center px-2",children:[(0,o.jsx)("label",{className:d()(b.W.label,"flex-1","font-bold text"),children:"Levels"}),(0,o.jsx)("div",{className:"items-center",children:(0,o.jsx)("button",{type:"button",onClick:function(){return e.setKey(Math.round(1e4*Math.random()).toString(),{})},className:b.W.addButtonSmall,children:"+ Add Policy"})})]}),(0,o.jsx)(y.i,{rows:Object.keys(null!==(ae=e.value)&&void 0!==ae?ae:{}).map((function(t){return(0,s.Z)({key:t},(null!==(de=e.value)&&void 0!==de?de:{})[t])})),columns:["Level","Policy","Action"],cells:function(t){return[(0,o.jsx)(P.C,{value:t.key,onEdit:function(l){e.renameKey(t.key,l)},children:t.key}),(0,o.jsxs)("div",{children:[(0,o.jsx)(N.gN,{htmlFor:"handshake",label:"Handshake",children:(0,o.jsx)("input",{type:"number",id:"handshake",className:b.W.input,placeholder:"4"})}),(0,o.jsx)(N.gN,{htmlFor:"connIdle",label:"Connection Idle",children:(0,o.jsx)("input",{type:"number",id:"connIdle",className:b.W.input,placeholder:"300"})}),(0,o.jsx)(N.gN,{htmlFor:"uplinkOnly",label:"Uplink Only",children:(0,o.jsx)("input",{type:"number",id:"uplinkOnly",className:b.W.input,placeholder:"300"})}),(0,o.jsx)(N.gN,{htmlFor:"downlinkOnly",label:"Downlink Only",children:(0,o.jsx)("input",{type:"number",id:"downlinkOnly",className:b.W.input,placeholder:"300"})}),(0,o.jsx)(N.gN,{htmlFor:"bufferSize",label:"Buffer Size",children:(0,o.jsx)("input",{type:"number",id:"bufferSize",className:b.W.input,placeholder:"300"})}),(0,o.jsx)(N.gN,{htmlFor:"statsUserUplink",label:"Stats User Uplink",horizontal:!0,children:(0,o.jsx)("input",{type:"checkbox",id:"statsUserUplink",className:b.W.input})}),(0,o.jsx)(N.gN,{htmlFor:"statsUserDownlink",label:"Stats User Downlink",horizontal:!0,children:(0,o.jsx)("input",{type:"checkbox",id:"statsUserDownlink",className:b.W.input})})]}),(0,o.jsx)("span",{className:b.W.link,onClick:function(){return e.deleteKey(t.key)},children:"Delete"})]},rowContainer:function(t,l){return(0,o.jsx)(N.H_,{data:(0,w.r0)(t,"key"),dataSetter:function(l){return e.setKey(t.key,l)},children:l})}})]})}})]}),Me=(0,o.jsx)(N.FE,{data:null!==(ce=null===z||void 0===z?void 0:z.outbounds)&&void 0!==ce?ce:[],dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{outbounds:e}))},children:function(e){return(0,o.jsxs)("div",{id:"config-outbounds",className:"rounded-lg border-2 flex flex-col flex-1",children:[(0,o.jsx)(N.H_,{title:"Outbounds",data:_,dataSetter:H,horizontal:!0,children:(0,o.jsxs)("div",{className:"flex flex-row flex-1 pr-2",children:[(0,o.jsx)("div",{className:"flex-1"}),(0,o.jsx)("button",{onClick:function(){return De.show({},e.addItem)},className:d()(b.W.addButton,"float-right"),children:"+ Add Outbound"})]})}),(0,o.jsx)(y.i,{rows:e.items,columns:["Tag","Protocol","Send Through","Proxy Settings","Stream Settings","Action"],cells:function(t){var l,n,s,i,r,a,d,c,u;return[null!==(ue=t.tag)&&void 0!==ue?ue:Te,(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{children:null!==(xe=t.protocol)&&void 0!==xe?xe:Te}),(null===(l=t.settings)||void 0===l?void 0:l.servers)&&(null!==(he=null===(n=t.settings)||void 0===n||null===(s=n.servers)||void 0===s?void 0:s.length)&&void 0!==he?he:0)>0?(0,o.jsxs)("span",{className:"text-gray-400",children:[null===(i=t.settings)||void 0===i?void 0:i.servers[0].address,":",null===(r=t.settings)||void 0===r?void 0:r.servers[0].port]}):null]}),null!==(pe=t.sendThrough)&&void 0!==pe?pe:Te,(0,o.jsxs)(I.B,{children:[(0,o.jsx)(I.k,{label:"Tag",children:null!==(me=null===(a=t.proxySettings)||void 0===a?void 0:a.tag)&&void 0!==me?me:Te}),(0,o.jsx)(I.k,{label:"Transport Layer",children:null!==(je=null===(d=t.proxySettings)||void 0===d?void 0:d.transportLayer)&&void 0!==je?je:Te})]}),(0,o.jsxs)(I.B,{children:[(0,o.jsx)(I.k,{label:"Security",children:null!==(ve=null===(c=t.streamSettings)||void 0===c?void 0:c.security)&&void 0!==ve?ve:Te}),(0,o.jsx)(I.k,{label:"Transport",children:null!==(fe=null===(u=t.streamSettings)||void 0===u?void 0:u.transport)&&void 0!==fe?fe:Te})]}),(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(g.Z.Item,{action:function(){return De.show(t,e.updateItem)},children:"Edit"}),(0,o.jsx)(g.Z.Item,{action:function(){return e.deleteItem(t)},children:"Delete"})]})]}})]})}}),Le=(0,o.jsx)(N.FE,{data:null!==(be=null===z||void 0===z||null===(a=z.routing)||void 0===a?void 0:a.rules)&&void 0!==be?be:[],dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{routing:(0,i.Z)((0,s.Z)({},null===z||void 0===z?void 0:z.routing),{rules:e})}))},children:function(e){return(0,o.jsxs)("div",{id:"config-routing",className:"rounded-lg border-2 flex flex-col flex-1",children:[(0,o.jsx)(N.H_,{title:"Rules",horizontal:!0,data:null===z||void 0===z?void 0:z.routing,dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{routing:e}))},children:(0,o.jsxs)("div",{className:"flex flex-row flex-1 pr-2",children:[(0,o.jsxs)("div",{className:"flex-1 flex-row flex",children:[(0,o.jsx)(N.gN,{label:"Domain Strategy",htmlFor:"domainStrategy",children:(0,o.jsxs)("select",{className:b.W.input,id:"domainStrategy",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"AsIs",children:"AsIs"}),(0,o.jsx)("option",{value:"IPIfNonMatch",children:"IPIfNonMatch"}),(0,o.jsx)("option",{value:"IPOnDemand",children:"IPOnDemand"})]})}),(0,o.jsx)(N.gN,{label:"Domain Matcher",htmlFor:"domainMatcher",children:(0,o.jsxs)("select",{className:b.W.input,id:"domainMatcher",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{value:"linear",children:"Linear"}),(0,o.jsx)("option",{value:"mph",children:"MPH"})]})})]}),(0,o.jsx)("button",{onClick:function(){return Ae.show({},e.addItem)},className:d()(b.W.addButton,"float-right"),children:"+ Add Rule"})]})}),(0,o.jsx)(y.i,{rows:e.items,columns:["Options","Tags","Filters","Action"],rowContainer:function(e,t){return(0,o.jsxs)(o.Fragment,{children:[e.description?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{}),(0,o.jsx)("td",{colSpan:4,className:"px-3 py-2",children:e.description})]}):null,t]})},cells:function(t){var l,n,s;return[(0,o.jsxs)(I.B,{children:[(0,o.jsx)(I.k,{label:"Type",children:null!==(Ne=t.type)&&void 0!==Ne?Ne:Te}),(0,o.jsx)(I.k,{label:"Domain Matcher",children:null!==(ge=t.domainMatcher)&&void 0!==ge?ge:Te}),(0,o.jsx)(I.k,{label:"Network",children:null!==(ye=t.network)&&void 0!==ye?ye:Te}),(0,o.jsx)(I.k,{label:"Source Port",children:null!==(ke=t.sourcePort)&&void 0!==ke?ke:Te}),(0,o.jsx)(I.k,{label:"Attributes",children:null!==(Se=t.attrs)&&void 0!==Se?Se:Te})]}),(0,o.jsxs)(I.B,{children:[(0,o.jsx)(I.k,{label:"Inbound",children:null!==(we=t.inboundTag)&&void 0!==we?we:Te}),(0,o.jsx)(I.k,{label:"Outbound",children:null!==(We=t.outboundTag)&&void 0!==We?We:Te}),(0,o.jsx)(I.k,{label:"Balancer",children:null!==(Fe=t.balancerTag)&&void 0!==Fe?Fe:Te})]}),(0,o.jsxs)(I.B,{children:[(0,o.jsx)(I.k,{label:"Port",children:null!==(Ze=t.port)&&void 0!==Ze?Ze:Te}),(0,o.jsx)(I.k,{label:"IPs",children:t.ip?Array.isArray(t.ip)&&(null===(l=t.ip)||void 0===l?void 0:l.length)>1?"".concat(t.ip.length," IPs"):t.ip:Te}),(0,o.jsx)(I.k,{label:"Domains",children:t.domain?Array.isArray(t.domain)&&(null===(n=t.domain)||void 0===n?void 0:n.length)>1?"".concat(t.domain.length," domains"):t.domain:Te}),(0,o.jsx)(I.k,{label:"Users",children:t.user?Array.isArray(t.user)&&(null===(s=t.user)||void 0===s?void 0:s.length)>1?"".concat(t.user.length," users"):t.user:Te})]}),(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(g.Z.Item,{action:function(){return Ae.show(t,e.updateItem)},children:"Edit"}),(0,o.jsx)(g.Z.Item,{action:function(){return e.deleteItem(t)},children:"Delete"})]})]}})]})}}),Ve=(0,o.jsx)(N.FE,{data:null!==(Ie=null===z||void 0===z||null===(c=z.routing)||void 0===c?void 0:c.balancers)&&void 0!==Ie?Ie:[],dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{routing:(0,i.Z)((0,s.Z)({},null===z||void 0===z?void 0:z.routing),{balancers:e})}))},children:function(e){return(0,o.jsxs)("div",{id:"config-routing",className:"rounded-lg border-2 flex flex-col flex-1",children:[(0,o.jsx)(N.H_,{title:"Balancers",horizontal:!0,data:null===z||void 0===z?void 0:z.routing,dataSetter:function(e){return q((0,i.Z)((0,s.Z)({},z),{routing:e}))},children:(0,o.jsxs)("div",{className:"flex flex-row flex-1 pr-2",children:[(0,o.jsx)("div",{className:"flex-1 flex-row flex"}),(0,o.jsx)("button",{onClick:function(){return Oe.show({},e.addItem)},className:d()(b.W.addButton,"float-right"),children:"+ Add Balancer"})]})}),(0,o.jsx)(y.i,{rows:e.items,columns:["Tag","Selectors","Action"],cells:function(t){var l;return[t.tag,null===(l=t.selector)||void 0===l?void 0:l.join(", "),(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(g.Z.Item,{action:function(){return Oe.show(t,e.updateItem)},children:"Edit"}),(0,o.jsx)(g.Z.Item,{action:function(){return e.deleteItem(t)},children:"Delete"})]})]}})]})}});return(0,o.jsxs)(v.W,{children:[(0,o.jsx)(u(),{children:(0,o.jsx)("title",{children:"Configuration"})}),(0,o.jsxs)(N.H_,{title:"Configuration",className:"px-3",children:[(0,o.jsxs)("div",{className:"flex-1 flex-row flex items-center",children:[V?(0,o.jsx)("span",{className:"rounded-lg bg-gray-700 text-white px-3 py-0",children:"Loading"}):null,(0,w.My)(L,z).length>0?(0,o.jsx)("span",{className:"rounded-lg bg-yellow-100 text-yellow-800 text-xs px-3 py-1",children:"Changed"}):null]}),(0,o.jsx)("button",{type:"button",onClick:function(){return Pe()},className:b.W.button,children:"Restart V2Ray"}),(0,o.jsx)("button",{type:"button",onClick:function(){return Ce()},className:b.W.buttonPrimary,children:"Save Configuration"})]}),(0,o.jsx)("div",{className:"p-3",children:(0,o.jsxs)(F,{children:[(0,o.jsxs)(F.Tab,{title:"Log & Api",className:"space-y-2",children:[He,Ue,(0,o.jsx)("div",{className:"rounded-lg flex flex-col flex-1 border-2",children:(0,o.jsx)(N.H_,{title:"Stats",layoutVertical:!0,children:(0,o.jsx)("div",{className:"p-2",children:(0,o.jsx)(N.gN,{label:"Enable Stats",htmlFor:"stats",data:!!(null===z||void 0===z?void 0:z.stats),dataSetter:function(e){return q(e?(0,i.Z)((0,s.Z)({},z),{stats:{}}):(0,w.r0)(null!==z&&void 0!==z?z:{},"stats"))},className:"flex-1 mt-1",children:(0,o.jsx)("input",{type:"checkbox",className:b.W.input})})})})})]}),(0,o.jsx)(F.Tab,{title:"Policy",children:Be}),(0,o.jsx)(F.Tab,{title:"Inbounds",children:_e}),(0,o.jsx)(F.Tab,{title:"Outbounds",children:Me}),(0,o.jsx)(F.Tab,{title:"Routing",children:(0,o.jsxs)(F,{children:[(0,o.jsx)(F.Tab,{title:"Rules",children:Le}),(0,o.jsx)(F.Tab,{title:"Balancer",children:Ve})]})}),(0,o.jsx)(F.Tab,{title:"Changes",children:(0,o.jsx)(C,{value:(0,w.My)(L,z)})})]})})]})}},9008:function(e,t,l){e.exports=l(5443)},7568:function(e,t,l){"use strict";function n(e,t,l,n,s,i,r){try{var o=e[i](r),a=o.value}catch(d){return void l(d)}o.done?t(a):Promise.resolve(a).then(n,s)}function s(e){return function(){var t=this,l=arguments;return new Promise((function(s,i){var r=e.apply(t,l);function o(e){n(r,s,i,o,a,"next",e)}function a(e){n(r,s,i,o,a,"throw",e)}o(void 0)}))}}l.d(t,{Z:function(){return s}})},9396:function(e,t,l){"use strict";function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}(Object(t)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))})),e}l.d(t,{Z:function(){return n}})},9534:function(e,t,l){"use strict";function n(e,t){if(null==e)return{};var l,n,s=function(e,t){if(null==e)return{};var l,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)l=i[n],t.indexOf(l)>=0||(s[l]=e[l]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)l=i[n],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(s[l]=e[l])}return s}l.d(t,{Z:function(){return n}})}},function(e){e.O(0,[966,923,774,888,179],(function(){return t=8629,e(e.s=t);var t}));var t=e.O();_N_E=t}]);