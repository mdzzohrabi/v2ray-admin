(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{2442:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/logs",function(){return n(8662)}])},1257:function(e,t,n){"use strict";n.d(t,{W:function(){return u}});var r=n(5893),s=n(1664),l=n.n(s),o=n(1163),i=n(4184),c=n.n(i);n(7294);function u(e){var t=e.children,n="1"==(0,o.useRouter)().query.all;return(0,r.jsxs)("div",{className:"flex flex-col h-screen overflow-x-auto w-full text-xs xl:text-sm",children:[(0,r.jsxs)("ul",{className:"px-2 py-3 flex xl:sticky top-0 z-50 bg-slate-100",children:[n?(0,r.jsx)(a,{href:"/logs"+(n?"?all=1":""),text:"Logs"}):null,n?(0,r.jsx)(a,{href:"/usages/traffic"+(n?"?all=1":""),text:"Traffic Usages"}):null,(0,r.jsx)(a,{href:"/transactions"+(n?"?all=1":""),text:"Transactions"}),(0,r.jsx)(a,{href:"/users"+(n?"?all=1":""),text:"Users"}),n?(0,r.jsx)(a,{href:"/configuration"+(n?"?all=1":""),text:"Configuration"}):null,(0,r.jsx)(a,{href:"/server_config"+(n?"?all=1":""),text:"Servers"}),(0,r.jsx)(a,{href:"/logout",children:"Logout"})]}),(0,r.jsx)("div",{className:"bg-white block shadow-md mt-2 min-w-fit",children:t})]})}function a(e){var t=e.href,n=e.text,s=void 0===n?void 0:n,i=e.children,u=void 0===i?void 0:i,a=(0,o.useRouter)();return(0,r.jsx)(l(),{href:t,children:(0,r.jsx)("li",{className:c()("whitespace-nowrap px-3 py-1 cursor-pointer rounded-lg",{"hover:bg-white":a.asPath!=t},{"font-bold bg-slate-800 text-white":a.asPath==t}),children:null!==s&&void 0!==s?s:u})})}},8662:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(9815),s=n(5893),l=n(4184),o=n.n(l),i=n(9008),c=n.n(i),u=n(7294),a=n(1272),d=n(1257),x=n(9367),f=n(1163);function h(){var e,t=(0,u.useContext)(a.I),n=(0,f.useRouter)(),l=(0,u.useState)([""]),i=l[0],h=l[1],v=(0,u.useState)(!1),g=v[0],b=v[1],p=(0,u.useState)(String(null!==(e=n.query.filter)&&void 0!==e?e:"")),m=p[0],j=p[1],w=(0,u.useMemo)((function(){return(0,x.io)(t.server.url+"/logs")}),[]);(0,u.useEffect)((function(){null===w||void 0===w||w.on("connect",(function(){return b(!0)})),null===w||void 0===w||w.on("disconnect",(function(){return b(!1)})),null===w||void 0===w||w.on("log",(function(e){return h((0,r.Z)(i).concat([e]))}))}),[i,h,w,b]);var N=(0,u.useCallback)((function(){null===w||void 0===w||w.emit("filter",m)}),[w,m]);(0,u.useEffect)((function(){return function(){w&&w.close()}}),[]);return(0,s.jsxs)(d.W,{children:[(0,s.jsx)(c(),{children:(0,s.jsxs)("title",{children:["Logs (",g?"Connected":"Disconnected",")"]})}),(0,s.jsxs)("div",{className:"flex flex-row px-3 py-3 border-t-[1px]",children:[(0,s.jsxs)("div",{className:"flex flex-row px-1 text-sm",children:[(0,s.jsx)("label",{htmlFor:"filter",className:"py-1 pr-2 self-start font-semibold",children:"Filter"}),(0,s.jsx)("input",{type:"text",id:"filter",className:"border-gray-500 border-solid border-b-0 bg-slate-100 rounded-md invalid:border-red-500 invalid:ring-red-600 px-2 py-1 focus:outline-blue-500",onChange:function(e){return j(e.currentTarget.value)},value:m})]}),(0,s.jsx)("button",{className:"bg-slate-200 px-5 py-1 rounded-lg text-sm hover:bg-slate-800 hover:text-white hover:shadow-md duration-75",onClick:function(){return N()},children:"Set Filter"}),(0,s.jsx)("button",{className:"bg-slate-200 px-5 py-1 rounded-lg text-sm hover:bg-slate-800 hover:text-white hover:shadow-md duration-75",onClick:function(){return h([])},children:"Clear Logs"})]}),(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"sticky top-0 bg-white shadow-md z-50",children:(0,s.jsx)("tr",{children:(0,s.jsx)("th",{className:"px-1 py-2 border-b-2 border-b-blue-900",children:"Log"})})}),(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:2,className:o()("py-1",{"bg-green-300":g,"bg-red-300":!g}),children:g?"Connected":"Disconnected"})}),i.map((function(e,t){return(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:e})},t)}))]})]})]})}}},function(e){e.O(0,[966,452,774,888,179],(function(){return t=2442,e(e.s=t);var t}));var t=e.O();_N_E=t}]);